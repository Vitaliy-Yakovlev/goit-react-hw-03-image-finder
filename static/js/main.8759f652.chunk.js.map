{"version":3,"sources":["Searchbar/Searchbar.module.css","ImageGalleryItem/ImageGalleryItem.module.css","Modal/Modal.module.css","ImageGallery/ImageGallery.module.css","Loader/Loader.module.css","services/images-api.js","Button/Button.js","Searchbar/Searchbar.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","Modal/Modal.js","Loader/Loader.js","App.js","index.js"],"names":["module","exports","api","fetchImages","searchQuery","currentPage","axios","get","then","response","data","Button","children","onSubmit","allyProps","type","defaultProps","onClick","Searchbar","state","handleNameImageChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","toast","error","this","className","s","SearchForm","SearchFormButton","SearchFormInput","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","id","webformatURL","tags","largeImageURL","src","alt","ImageGalleryItemImage","ImageGallery","images","map","image","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","tag","width","height","Spinner","color","timeout","spinnerStyle","App","isLoading","showModal","imagesAPI","hits","length","prevState","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","catch","finally","toggleModal","dataset","source","prevProps","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8759f652.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__MU_sV\",\"SearchForm\":\"Searchbar_SearchForm__H8tcx\",\"SearchFormButton\":\"Searchbar_SearchFormButton__14ui5\",\"SearchFormButton-label\":\"Searchbar_SearchFormButton-label__2SPQB\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3gkzL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2hvpq\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3ZaX9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__AVvj6\",\"Modal\":\"Modal_Modal__AHV_9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1pbdI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerStyle\":\"Loader_spinnerStyle__270dI\"};","import axios from 'axios';\r\n\r\nconst API_KEY = '21824394-3f4c7e3f700c9b67b092e1424';\r\nconst BASE_URL = 'https://pixabay.com/api';\r\nconst PER_PAGE = 12;\r\n\r\nfunction fetchImages({ searchQuery, currentPage }) {\r\n  return axios\r\n    .get(\r\n      `${BASE_URL}/?key=${API_KEY}&q=${searchQuery}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=${PER_PAGE}`,\r\n    )\r\n    .then(response => {\r\n      return response.data;\r\n    });\r\n}\r\n\r\nconst api = {\r\n  fetchImages,\r\n};\r\n\r\nexport default api;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ children, onSubmit, ...allyProps }) => (\n  <button onSubmit={onSubmit} type=\"submit\" {...allyProps}>\n    {children}\n  </button>\n);\n\nButton.defaultProps = {\n  onClick: () => null,\n  children: null,\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n  'aria-label': PropTypes.string,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Button from '../Button';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    searchQuery: '',\n  };\n\n  handleNameImageChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    const { searchQuery } = this.state;\n    e.preventDefault();\n\n    if (searchQuery.trim() === '') {\n      toast.error('Enter your request');\n      return;\n    }\n    this.props.onSubmit(searchQuery);\n  };\n\n  render() {\n    const { searchQuery } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <Button className={s.SearchFormButton} />\n          <input\n            className={s.SearchFormInput}\n            name=\"searchQuery\"\n            onChange={this.handleNameImageChange}\n            value={searchQuery}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({\r\n  id,\r\n  webformatURL,\r\n  tags,\r\n  onClick,\r\n  largeImageURL,\r\n}) => (\r\n  <li onClick={onClick} key={id} className={s.ImageGalleryItem}>\r\n    <img\r\n      src={webformatURL}\r\n      alt={tags}\r\n      className={s.ImageGalleryItemImage}\r\n      data-source={largeImageURL}\r\n    />\r\n  </li>\r\n);\r\n\r\nImageGalleryItem.propTypes = {\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClick }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(image => (\n        <ImageGalleryItem\n          onClick={onClick}\n          key={image.id}\n          webformatURL={image.webformatURL}\n          tags={image.tags}\n          largeImageURL={image.largeImageURL}\n        />\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  onClick: PropTypes.func,\n  images: PropTypes.array.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n};\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL, images } = this.props;\n\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={largeImageURL} alt={images.tag} width=\"800\" height=\"600\" />\n        </div>\n      </div>,\n\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nconst Spinner = () => (\n  <Loader\n    type=\"Puff\"\n    color=\"#00BFFF\"\n    height={100}\n    width={100}\n    timeout={3000}\n    className={s.spinnerStyle}\n  />\n);\n\nexport default Spinner;\n","import React, { Component } from 'react';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport './App.css';\r\nimport imagesAPI from './services/images-api';\r\nimport Searchbar from './Searchbar';\r\nimport ImageGallery from './ImageGallery';\r\nimport Modal from './Modal';\r\nimport Button from './Button';\r\nimport Spinner from './Loader';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: '',\r\n    currentPage: 1,\r\n    isLoading: false,\r\n    showModal: false,\r\n    error: null,\r\n    largeImageURL: '',\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.searchQuery !== this.state.searchQuery) {\r\n      this.fetchImages();\r\n    }\r\n  }\r\n\r\n  fetchImages = () => {\r\n    const { searchQuery, currentPage } = this.state;\r\n\r\n    this.setState({ isLoading: true });\r\n\r\n    imagesAPI\r\n      .fetchImages({\r\n        searchQuery,\r\n        currentPage,\r\n      })\r\n      .then(images => {\r\n        if (!images.hits.length) {\r\n          toast.error('Не верный запрос');\r\n          return;\r\n        }\r\n\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...images.hits],\r\n          currentPage: prevState.currentPage + 1,\r\n        }));\r\n\r\n        if (this.state.currentPage > 2) {\r\n          setTimeout(() => {\r\n            window.scrollBy({\r\n              top: document.documentElement.clientHeight - 120,\r\n              behavior: 'smooth',\r\n            });\r\n          }, 600);\r\n        }\r\n      })\r\n      .catch(error => this.setState({ error }))\r\n      .finally(() => this.setState({ isLoading: false }));\r\n  };\r\n\r\n  handleSubmit = searchQuery => {\r\n    this.setState({ searchQuery, currentPage: 1, images: [] });\r\n  };\r\n\r\n  toggleModal = e => {\r\n    const { showModal } = this.state;\r\n\r\n    if (!showModal) {\r\n      this.setState({ largeImageURL: e.target.dataset.source });\r\n    }\r\n\r\n    if (showModal) {\r\n      this.setState({ largeImageURL: '' });\r\n    }\r\n\r\n    this.setState(({ showModal }) => ({\r\n      showModal: !showModal,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const { isLoading, images, largeImageURL, showModal } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <Searchbar onSubmit={this.handleSubmit} />\r\n        <ToastContainer autoClose={3000} />\r\n        {isLoading && <Spinner />}\r\n\r\n        <ImageGallery\r\n          images={images}\r\n          onClick={this.toggleModal}\r\n          largeImageURL={largeImageURL}\r\n        />\r\n\r\n        {images.length > 0 && (\r\n          <Button\r\n            className=\"ButtonLoad\"\r\n            onClick={this.fetchImages}\r\n            aria-label=\"Загрузить еще\"\r\n          >\r\n            <span className=\"label\">Load more</span>\r\n          </Button>\r\n        )}\r\n\r\n        {showModal && (\r\n          <Modal\r\n            onClose={this.toggleModal}\r\n            largeImageURL={largeImageURL}\r\n            tag={images.tag}\r\n            images={images}\r\n          />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}