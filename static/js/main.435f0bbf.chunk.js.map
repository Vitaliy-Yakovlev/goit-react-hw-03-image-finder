{"version":3,"sources":["services/images-api.js","Button/Button.js","Searchbar/Searchbar.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","Modal/Modal.js","Loader/Loader.js","App.js","index.js"],"names":["api","fetchImages","searchQuery","currentPage","axios","get","then","response","data","Button","children","onSubmit","allyProps","type","defaultProps","onClick","Searchbar","state","handleNameImageChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","toast","error","className","this","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","id","webformatURL","tags","largeImageURL","src","alt","ImageGallery","images","map","image","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","tag","Spinner","color","height","width","timeout","App","isLoading","showModal","imagesAPI","hits","length","prevState","setTimeout","scrollBy","top","documentElement","clientHeight","behavior","catch","finally","handleNextPage","toggleModal","console","log","dataset","source","prevProps","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.435f0bbf.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '21824394-3f4c7e3f700c9b67b092e1424';\nconst BASE_URL = 'https://pixabay.com/api';\nconst PER_PAGE = 12;\n\nfunction fetchImages({ searchQuery, currentPage }) {\n  return axios\n    .get(\n      `${BASE_URL}/?key=${API_KEY}&q=${searchQuery}&page=${currentPage}&image_type=photo&orientation=horizontal&per_page=${PER_PAGE}`,\n    )\n    .then(response => {\n      return response.data;\n    });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ children, onSubmit, ...allyProps }) => (\n  <button onSubmit={onSubmit} type=\"submit\" {...allyProps}>\n    {children}\n  </button>\n);\n\nButton.defaultProps = {\n  onClick: () => null,\n  children: null,\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n  'aria-label': PropTypes.string,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Button from '../Button';\n\nclass Searchbar extends Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleNameImageChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.searchQuery.trim() === '') {\n      toast.error('Enter your request');\n\n      return;\n    }\n\n    this.props.onSubmit(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <Button className=\"SearchForm-button\" />\n          <input\n            className=\"SearchForm-input\"\n            name=\"searchQuery\"\n            onChange={this.handleNameImageChange}\n            value={this.state.searchQuery}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","function ImageGalleryItem({ id, webformatURL, tags, onClick, largeImageURL }) {\n  return (\n    <li onClick={onClick} key={id} className=\"ImageGalleryItem\">\n      <img\n        src={webformatURL}\n        alt={tags}\n        className=\"ImageGalleryItem-image\"\n        data-source={largeImageURL}\n      />\n    </li>\n  );\n}\n\nexport default ImageGalleryItem;\n","import ImageGalleryItem from '../ImageGalleryItem';\n\nfunction ImageGallery({ images, onClick }) {\n  return (\n    <ul className=\"ImageGallery\">\n      {images.map(image => (\n        <ImageGalleryItem\n          onClick={onClick}\n          key={image.id}\n          webformatURL={image.webformatURL}\n          tags={image.tags}\n          largeImageURL={image.largeImageURL}\n        />\n      ))}\n    </ul>\n  );\n}\n\nexport default ImageGallery;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">\n          <img src={this.props.largeImageURL} alt={this.props.images.tag} />\n        </div>\n      </div>,\n\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\n\nconst Spinner = () => (\n  <Loader\n    type=\"Puff\"\n    color=\"#00BFFF\"\n    height={100}\n    width={100}\n    timeout={3000}\n    className=\"spinnerStyle\"\n  />\n);\n\nexport default Spinner;\n","import React, { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './App.css';\nimport imagesAPI from './services/images-api';\nimport Searchbar from './Searchbar';\nimport ImageGallery from './ImageGallery';\nimport Modal from './Modal';\nimport Button from './Button';\nimport Spinner from './Loader';\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    currentPage: 1,\n    isLoading: false,\n    showModal: false,\n    error: null,\n    largeImageURL: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  fetchImages = () => {\n    this.setState({ isLoading: true });\n\n    imagesAPI\n      .fetchImages({\n        searchQuery: this.state.searchQuery,\n        currentPage: this.state.currentPage,\n      })\n      .then(images => {\n        if (!images.hits.length) {\n          toast.error('Не верный запрос');\n          return;\n        }\n\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images.hits],\n        }));\n\n        if (this.state.currentPage >= 2) {\n          setTimeout(() => {\n            window.scrollBy({\n              top: document.documentElement.clientHeight - 120,\n              behavior: 'smooth',\n            });\n          }, 600);\n        }\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  handleSubmit = searchQuery => {\n    this.setState({ searchQuery, currentPage: 1, images: [] });\n  };\n\n  handleNextPage = e => {\n    this.setState({ currentPage: this.state.currentPage + 1 });\n    this.fetchImages();\n  };\n\n  toggleModal = e => {\n    if (!this.state.showModal) {\n      console.log(e.target.dataset.source);\n      this.setState({ largeImageURL: e.target.dataset.source });\n    }\n\n    if (this.state.showModal) {\n      this.setState({ largeImageURL: '' });\n    }\n\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSubmit} />\n        {this.state.isLoading && <Spinner />}\n        <ToastContainer autoClose={3000} />\n        <ImageGallery\n          images={this.state.images}\n          onClick={this.toggleModal}\n          largeImageURL={this.state.largeImageURL}\n        />\n        {this.state.images.length > 0 && (\n          <Button\n            className=\"Button\"\n            onClick={this.handleNextPage}\n            aria-label=\"Загрузить еще\"\n          >\n            <span className=\"label\">Load more</span>\n          </Button>\n        )}\n        {this.state.showModal && (\n          <Modal\n            onClose={this.toggleModal}\n            largeImageURL={this.state.largeImageURL}\n            tag={this.state.images.tag}\n            images={this.state.images}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}